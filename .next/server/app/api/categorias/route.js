"use strict";(()=>{var e={};e.id=138,e.ids=[138],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:e=>{e.exports=import("pg")},290:(e,a,r)=>{r.a(e,async(e,t)=>{try{r.r(a),r.d(a,{headerHooks:()=>l,originalPathname:()=>E,requestAsyncStorage:()=>u,routeModule:()=>c,serverHooks:()=>p,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>g});var o=r(884),n=r(6132),s=r(2430),i=e([s]);s=(i.then?(await i)():i)[0];let c=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/categorias/route",pathname:"/api/categorias",filename:"route",bundlePath:"app/api/categorias/route"},resolvedPagePath:"C:\\Users\\User\\Documents\\PROYECTOS\\BASE DE DATOS - Facultad\\ProbandoReact\\ControlaMas\\app\\api\\categorias\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:p,headerHooks:l,staticGenerationBailout:g}=c,E="/api/categorias/route";t()}catch(e){t(e)}})},2430:(e,a,r)=>{r.a(e,async(e,t)=>{try{r.r(a),r.d(a,{GET:()=>GET,POST:()=>POST,dynamic:()=>i});var o=r(5798),n=r(8818),s=e([n]);n=(s.then?(await s)():s)[0];let i="force-dynamic";async function GET(){try{let e=await n.Z.query(`
      SELECT id_categoria, categoria 
      FROM Categoria 
      ORDER BY categoria
    `);return o.Z.json(e.rows)}catch(e){return o.Z.json({error:"Error al obtener categor\xedas"},{status:500})}}async function POST(e){try{let{categoria:a}=await e.json();if(!a)return o.Z.json({error:"El nombre de la categor\xeda es requerido"},{status:400});let r=await n.Z.query("INSERT INTO Categoria (categoria) VALUES ($1) RETURNING *",[a]);return o.Z.json(r.rows[0])}catch(e){if("23505"===e.code)return o.Z.json({error:"Ya existe una categor\xeda con ese nombre"},{status:400});return o.Z.json({error:"Error al crear categor\xeda"},{status:500})}}t()}catch(e){t(e)}})},8818:(e,a,r)=>{r.a(e,async(e,t)=>{try{r.d(a,{Z:()=>i});var o=r(8678),n=e([o]);o=(n.then?(await n)():n)[0];let s=new o.Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1}}),i=s;t()}catch(e){t(e)}})}};var a=require("../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),r=a.X(0,[997],()=>__webpack_exec__(290));module.exports=r})();