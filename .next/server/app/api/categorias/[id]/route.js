"use strict";(()=>{var e={};e.id=532,e.ids=[532],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:e=>{e.exports=import("pg")},5198:(e,a,r)=>{r.a(e,async(e,t)=>{try{r.r(a),r.d(a,{headerHooks:()=>g,originalPathname:()=>E,requestAsyncStorage:()=>u,routeModule:()=>c,serverHooks:()=>l,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>p});var o=r(884),n=r(6132),s=r(4602),i=e([s]);s=(i.then?(await i)():i)[0];let c=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/categorias/[id]/route",pathname:"/api/categorias/[id]",filename:"route",bundlePath:"app/api/categorias/[id]/route"},resolvedPagePath:"C:\\Users\\User\\Documents\\PROYECTOS\\BASE DE DATOS - Facultad\\ProbandoReact\\ControlaMas\\app\\api\\categorias\\[id]\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:l,headerHooks:g,staticGenerationBailout:p}=c,E="/api/categorias/[id]/route";t()}catch(e){t(e)}})},4602:(e,a,r)=>{r.a(e,async(e,t)=>{try{r.r(a),r.d(a,{DELETE:()=>DELETE,PUT:()=>PUT,dynamic:()=>i});var o=r(5798),n=r(8818),s=e([n]);n=(s.then?(await s)():s)[0];let i="force-dynamic";async function PUT(e,{params:a}){try{let{categoria:r}=await e.json();if(!r)return o.Z.json({error:"El nombre de la categor\xeda es requerido"},{status:400});let t=await n.Z.query("UPDATE Categoria SET categoria = $1 WHERE id_categoria = $2 RETURNING *",[r,a.id]);if(0===t.rows.length)return o.Z.json({error:"Categor\xeda no encontrada"},{status:404});return o.Z.json(t.rows[0])}catch(e){if("23505"===e.code)return o.Z.json({error:"Ya existe una categor\xeda con ese nombre"},{status:400});return o.Z.json({error:"Error al actualizar categor\xeda"},{status:500})}}async function DELETE(e,{params:a}){try{let e=await n.Z.query("DELETE FROM Categoria WHERE id_categoria = $1 RETURNING *",[a.id]);if(0===e.rows.length)return o.Z.json({error:"Categor\xeda no encontrada"},{status:404});return o.Z.json({message:"Categor\xeda eliminada correctamente"})}catch(e){if("23503"===e.code)return o.Z.json({error:"No se puede eliminar la categor\xeda porque tiene gastos asociados"},{status:400});return o.Z.json({error:"Error al eliminar categor\xeda"},{status:500})}}t()}catch(e){t(e)}})},8818:(e,a,r)=>{r.a(e,async(e,t)=>{try{r.d(a,{Z:()=>i});var o=r(8678),n=e([o]);o=(n.then?(await n)():n)[0];let s=new o.Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1}}),i=s;t()}catch(e){t(e)}})}};var a=require("../../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),r=a.X(0,[997],()=>__webpack_exec__(5198));module.exports=r})();