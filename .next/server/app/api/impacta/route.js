"use strict";(()=>{var a={};a.id=913,a.ids=[913],a.modules={517:a=>{a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:a=>{a.exports=import("pg")},7067:(a,e,t)=>{t.a(a,async(a,o)=>{try{t.r(e),t.d(e,{headerHooks:()=>_,originalPathname:()=>g,requestAsyncStorage:()=>c,routeModule:()=>n,serverHooks:()=>d,staticGenerationAsyncStorage:()=>u,staticGenerationBailout:()=>m});var r=t(884),i=t(6132),s=t(3633),p=a([s]);s=(p.then?(await p)():p)[0];let n=new r.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/impacta/route",pathname:"/api/impacta",filename:"route",bundlePath:"app/api/impacta/route"},resolvedPagePath:"C:\\Users\\User\\Documents\\PROYECTOS\\BASE DE DATOS - Facultad\\ProbandoReact\\ControlaMas\\app\\api\\impacta\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:u,serverHooks:d,headerHooks:_,staticGenerationBailout:m}=n,g="/api/impacta/route";o()}catch(a){o(a)}})},3633:(a,e,t)=>{t.a(a,async(a,o)=>{try{t.r(e),t.d(e,{GET:()=>GET,dynamic:()=>p});var r=t(5798),i=t(8818),s=a([i]);i=(s.then?(await s)():s)[0];let p="force-dynamic";async function GET(a){try{let{searchParams:e}=new URL(a.url),t=e.get("id_usuario"),o=`
      SELECT i.*, mp.medio_pago, g.descripcion as descripcion_gasto,
             p.importe_a_pagar, p.fecha_pago,
             u.nombre as usuario_nombre
      FROM Impacta i
      JOIN Medio_pago mp ON i.id_medio_pago = mp.id_medio_pago
      JOIN Pago p ON i.id_pago = p.id_pago
      JOIN Gasto g ON p.id_gasto = g.id_gasto
      JOIN Usuario u ON g.id_usuario = u.id_usuario
    `,s=[];t&&(o+=" WHERE g.id_usuario = $1",s.push(t)),o+=" ORDER BY i.a\xf1o DESC, i.mes DESC, p.fecha_pago DESC";let p=await i.Z.query(o,s);return r.Z.json(p.rows)}catch(a){return console.error("Error al obtener impactos:",a),r.Z.json({error:"Error al obtener datos de impacto"},{status:500})}}o()}catch(a){o(a)}})},8818:(a,e,t)=>{t.a(a,async(a,o)=>{try{t.d(e,{Z:()=>p});var r=t(8678),i=a([r]);r=(i.then?(await i)():i)[0];let s=new r.Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1}}),p=s;o()}catch(a){o(a)}})}};var e=require("../../../webpack-runtime.js");e.C(a);var __webpack_exec__=a=>e(e.s=a),t=e.X(0,[997],()=>__webpack_exec__(7067));module.exports=t})();