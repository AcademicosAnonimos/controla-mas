"use strict";(()=>{var e={};e.id=345,e.ids=[345],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:e=>{e.exports=import("pg")},527:(e,o,r)=>{r.a(e,async(e,a)=>{try{r.r(o),r.d(o,{headerHooks:()=>m,originalPathname:()=>l,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>c,staticGenerationAsyncStorage:()=>u,staticGenerationBailout:()=>g});var t=r(884),i=r(6132),n=r(1828),s=e([n]);n=(s.then?(await s)():s)[0];let d=new t.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/medio-pago/route",pathname:"/api/medio-pago",filename:"route",bundlePath:"app/api/medio-pago/route"},resolvedPagePath:"C:\\Users\\User\\Documents\\PROYECTOS\\BASE DE DATOS - Facultad\\ProbandoReact\\ControlaMas\\app\\api\\medio-pago\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:p,staticGenerationAsyncStorage:u,serverHooks:c,headerHooks:m,staticGenerationBailout:g}=d,l="/api/medio-pago/route";a()}catch(e){a(e)}})},1828:(e,o,r)=>{r.a(e,async(e,a)=>{try{r.r(o),r.d(o,{GET:()=>GET,POST:()=>POST,dynamic:()=>s});var t=r(5798),i=r(8818),n=e([i]);i=(n.then?(await n)():n)[0];let s="force-dynamic";async function GET(){try{let e=await i.Z.query(`
      SELECT id_medio_pago, medio_pago 
      FROM Medio_pago 
      ORDER BY id_medio_pago
    `);return t.Z.json(e.rows)}catch(e){return t.Z.json({error:"Error al obtener medios de pago"},{status:500})}}async function POST(e){try{let{medio_pago:o}=await e.json();if(!o||!o.trim())return t.Z.json({error:"El nombre del medio de pago es requerido"},{status:400});let r=o.trim().toLowerCase(),a=await i.Z.query("SELECT id_medio_pago FROM Medio_pago WHERE LOWER(medio_pago) = LOWER($1)",[r]);if(a.rows.length>0)return t.Z.json({error:"Ya existe un medio de pago con ese nombre",medioExistente:a.rows[0]},{status:400});let n=await i.Z.query("INSERT INTO Medio_pago (medio_pago) VALUES ($1) RETURNING *",[o.trim()]);return t.Z.json(n.rows[0])}catch(e){if(console.error("Error en POST /api/medio-pago:",e),"23505"===e.code)return t.Z.json({error:"Ya existe un medio de pago con ese nombre (constraint)"},{status:400});return t.Z.json({error:"Error al crear medio de pago"},{status:500})}}a()}catch(e){a(e)}})},8818:(e,o,r)=>{r.a(e,async(e,a)=>{try{r.d(o,{Z:()=>s});var t=r(8678),i=e([t]);t=(i.then?(await i)():i)[0];let n=new t.Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1}}),s=n;a()}catch(e){a(e)}})}};var o=require("../../../webpack-runtime.js");o.C(e);var __webpack_exec__=e=>o(o.s=e),r=o.X(0,[997],()=>__webpack_exec__(527));module.exports=r})();