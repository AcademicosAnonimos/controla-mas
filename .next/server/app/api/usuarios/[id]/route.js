"use strict";(()=>{var r={};r.id=970,r.ids=[970],r.modules={517:r=>{r.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:r=>{r.exports=import("pg")},8252:(r,e,a)=>{a.a(r,async(r,t)=>{try{a.r(e),a.d(e,{headerHooks:()=>l,originalPathname:()=>m,requestAsyncStorage:()=>c,routeModule:()=>u,serverHooks:()=>E,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>p});var o=a(884),s=a(6132),n=a(8876),i=r([n]);n=(i.then?(await i)():i)[0];let u=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/usuarios/[id]/route",pathname:"/api/usuarios/[id]",filename:"route",bundlePath:"app/api/usuarios/[id]/route"},resolvedPagePath:"C:\\Users\\User\\Documents\\PROYECTOS\\BASE DE DATOS - Facultad\\ProbandoReact\\ControlaMas\\app\\api\\usuarios\\[id]\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:E,headerHooks:l,staticGenerationBailout:p}=u,m="/api/usuarios/[id]/route";t()}catch(r){t(r)}})},8876:(r,e,a)=>{a.a(r,async(r,t)=>{try{a.r(e),a.d(e,{DELETE:()=>DELETE,GET:()=>GET,PUT:()=>PUT,dynamic:()=>i});var o=a(5798),s=a(8818),n=r([s]);s=(n.then?(await n)():n)[0];let i="force-dynamic";async function GET(r,{params:e}){try{let r=await s.Z.query("SELECT id_usuario, nombre, monto_disponible FROM Usuario WHERE id_usuario = $1",[e.id]);if(0===r.rows.length)return o.Z.json({error:"Usuario no encontrado"},{status:404});return o.Z.json(r.rows[0])}catch(r){return o.Z.json({error:"Error al obtener usuario"},{status:500})}}async function PUT(r,{params:e}){try{let{nombre:a,monto_disponible:t}=await r.json(),n=await s.Z.query("UPDATE Usuario SET nombre = $1, monto_disponible = $2 WHERE id_usuario = $3 RETURNING *",[a,t,e.id]);if(0===n.rows.length)return o.Z.json({error:"Usuario no encontrado"},{status:404});return o.Z.json(n.rows[0])}catch(r){return o.Z.json({error:"Error al actualizar usuario"},{status:500})}}async function DELETE(r,{params:e}){try{let r=await s.Z.query("DELETE FROM Usuario WHERE id_usuario = $1 RETURNING *",[e.id]);if(0===r.rows.length)return o.Z.json({error:"Usuario no encontrado"},{status:404});return o.Z.json({message:"Usuario eliminado correctamente"})}catch(r){return o.Z.json({error:"Error al eliminar usuario"},{status:500})}}t()}catch(r){t(r)}})},8818:(r,e,a)=>{a.a(r,async(r,t)=>{try{a.d(e,{Z:()=>i});var o=a(8678),s=r([o]);o=(s.then?(await s)():s)[0];let n=new o.Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1}}),i=n;t()}catch(r){t(r)}})}};var e=require("../../../../webpack-runtime.js");e.C(r);var __webpack_exec__=r=>e(e.s=r),a=e.X(0,[997],()=>__webpack_exec__(8252));module.exports=a})();