(()=>{var e={};e.id=4,e.ids=[4],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},4856:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>d});var s=t(7096),r=t(6132),n=t(7284),o=t.n(n),c=t(2564),i={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>c[e]);t.d(a,i);let d=["",{children:["cuotas",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6090)),"C:\\Users\\User\\Documents\\PROYECTOS\\BASE DE DATOS - Facultad\\ProbandoReact\\ControlaMas\\app\\cuotas\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5345)),"C:\\Users\\User\\Documents\\PROYECTOS\\BASE DE DATOS - Facultad\\ProbandoReact\\ControlaMas\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],l=["C:\\Users\\User\\Documents\\PROYECTOS\\BASE DE DATOS - Facultad\\ProbandoReact\\ControlaMas\\app\\cuotas\\page.tsx"],u="/cuotas/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/cuotas/page",pathname:"/cuotas",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7844:(e,a,t)=>{Promise.resolve().then(t.bind(t,8260))},8260:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>CuotasPage});var s=t(784),r=t(9885),n=t(7100),o=t(7394),c=t(4911);function CuotasPage(){let[e,a]=(0,r.useState)([]),[t,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{cargarCuotas()},[]);let cargarCuotas=async()=>{try{let e=localStorage.getItem("usuarioActual"),t=await fetch(`/api/cuotas?id_usuario=${e}`),s=await t.json();a(s)}catch(e){console.error("Error cargando cuotas:",e)}finally{i(!1)}},handlePagarCuota=async e=>{if(confirm("\xbfMarcar esta cuota como pagada?"))try{let a=await fetch("/api/cuotas",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_cuota:e,accion:"pagar"})});if(a.ok)cargarCuotas(),alert("Cuota marcada como pagada correctamente");else{let e=await a.json();alert(e.error)}}catch(e){alert("Error al procesar pago de cuota")}},formatCurrency=e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(e),formatDate=e=>new Date(e).toLocaleDateString("es-AR"),getEstadoBadge=e=>({Pagada:"bg-success",Pendiente:"bg-warning",Vencida:"bg-danger"})[e]||"bg-secondary";return(0,s.jsxs)("div",{className:"d-flex",children:[s.jsx(o.Z,{}),(0,s.jsxs)("div",{className:"flex-grow-1",children:[s.jsx(n.Z,{}),(0,s.jsxs)("main",{className:"container-fluid py-4",children:[s.jsx("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"h3 mb-0",children:"Gesti\xf3n de Cuotas"}),s.jsx("p",{className:"text-muted",children:"Administra las cuotas de tus gastos temporales"})]})}),s.jsx("div",{className:"card",children:s.jsx("div",{className:"card-body",children:t?s.jsx("div",{className:"text-center py-4",children:s.jsx("div",{className:"spinner-border text-primary",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Cargando..."})})}):s.jsx("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-hover",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{children:[s.jsx("th",{children:"Descripci\xf3n"}),s.jsx("th",{children:"Tipo"}),s.jsx("th",{children:"Cuota"}),s.jsx("th",{children:"Monto Cuota"}),s.jsx("th",{children:"Vencimiento"}),s.jsx("th",{children:"Estado"}),s.jsx("th",{children:"Acciones"})]})}),s.jsx("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{children:e.descripcion_gasto}),s.jsx("td",{children:s.jsx("span",{className:"badge bg-info",children:e.tipo_gasto})}),(0,s.jsxs)("td",{children:[e.nro_cuota,"/",e.total_cuotas]}),s.jsx("td",{children:formatCurrency(e.monto_total/e.total_cuotas)}),s.jsx("td",{children:formatDate(e.fecha_vencimiento_cuota)}),s.jsx("td",{children:s.jsx("span",{className:`badge ${getEstadoBadge(e.estado)}`,children:e.estado})}),s.jsx("td",{children:"Pendiente"===e.estado&&(0,s.jsxs)("button",{className:"btn btn-success btn-sm",onClick:()=>handlePagarCuota(e.id_cuota),children:[s.jsx("i",{className:"fas fa-check me-1"}),"Pagar"]})})]},e.id_cuota))})]})})})})]}),s.jsx(c.Z,{})]})]})}},6090:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>o,__esModule:()=>n,default:()=>i});var s=t(5153);let r=(0,s.createProxy)(String.raw`C:\Users\User\Documents\PROYECTOS\BASE DE DATOS - Facultad\ProbandoReact\ControlaMas\app\cuotas\page.tsx`),{__esModule:n,$$typeof:o}=r,c=r.default,i=c}};var a=require("../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[862,879,866,655],()=>__webpack_exec__(4856));module.exports=t})();