(()=>{var e={};e.id=603,e.ids=[603],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},2081:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c});var s=t(7096),r=t(6132),i=t(7284),n=t.n(i),l=t(2564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(a,o);let c=["",{children:["categorias",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3335)),"C:\\Users\\User\\Documents\\PROYECTOS\\BASE DE DATOS - Facultad\\ProbandoReact\\ControlaMas\\app\\categorias\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5345)),"C:\\Users\\User\\Documents\\PROYECTOS\\BASE DE DATOS - Facultad\\ProbandoReact\\ControlaMas\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\User\\Documents\\PROYECTOS\\BASE DE DATOS - Facultad\\ProbandoReact\\ControlaMas\\app\\categorias\\page.tsx"],x="/categorias/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/categorias/page",pathname:"/categorias",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4141:(e,a,t)=>{Promise.resolve().then(t.bind(t,6013))},6013:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>CategoriasPage});var s=t(784),r=t(9885),i=t(7100),n=t(7394),l=t(4911);function CategoriasPage(){let[e,a]=(0,r.useState)([]),[t,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[x,m]=(0,r.useState)({categoria:""}),[u,g]=(0,r.useState)(!0),[h,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{cargarCategorias()},[]);let cargarCategorias=async()=>{try{let e=await fetch("/api/categorias"),t=await e.json();a(t)}catch(e){console.error("Error cargando categor\xedas:",e)}finally{g(!1)}},handleEdit=e=>{d(e),m({categoria:e.categoria}),o(!0)},handleDelete=async e=>{if(confirm("\xbfEst\xe1s seguro de eliminar esta categor\xeda?"))try{let a=await fetch(`/api/categorias/${e}`,{method:"DELETE"});if(a.ok)cargarCategorias(),alert("Categor\xeda eliminada correctamente");else{let e=await a.json();alert(e.error)}}catch(e){alert("Error al eliminar categor\xeda")}},handleSubmit=async e=>{if(e.preventDefault(),!x.categoria.trim()){alert("El nombre de la categor\xeda es requerido");return}p(!0);try{let e=c?`/api/categorias/${c.id_categoria}`:"/api/categorias",a=c?"PUT":"POST",t=await fetch(e,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(t.ok)o(!1),d(null),m({categoria:""}),cargarCategorias(),alert(c?"Categor\xeda actualizada":"Categor\xeda creada");else{let e=await t.json();alert(e.error)}}catch(e){alert("Error al guardar categor\xeda")}finally{p(!1)}},handleFormClose=()=>{o(!1),d(null),m({categoria:""})};return(0,s.jsxs)("div",{className:"d-flex",children:[s.jsx(n.Z,{}),(0,s.jsxs)("div",{className:"flex-grow-1",children:[s.jsx(i.Z,{}),(0,s.jsxs)("main",{className:"container-fluid py-4",children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"h3 mb-0",children:"Gesti\xf3n de Categor\xedas"}),s.jsx("p",{className:"text-muted",children:"Administra las categor\xedas de gastos"})]}),(0,s.jsxs)("button",{className:"btn btn-primary",onClick:()=>o(!0),children:[s.jsx("i",{className:"fas fa-plus me-2"}),"Nueva Categor\xeda"]})]}),s.jsx("div",{className:"card",children:s.jsx("div",{className:"card-body",children:u?s.jsx("div",{className:"text-center py-4",children:s.jsx("div",{className:"spinner-border text-primary",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Cargando..."})})}):s.jsx("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-hover",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{children:[s.jsx("th",{children:"ID"}),s.jsx("th",{children:"Nombre"}),s.jsx("th",{children:"Acciones"})]})}),s.jsx("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{children:e.id_categoria}),s.jsx("td",{children:e.categoria}),s.jsx("td",{children:(0,s.jsxs)("div",{className:"btn-group btn-group-sm",children:[s.jsx("button",{className:"btn btn-outline-primary",onClick:()=>handleEdit(e),children:s.jsx("i",{className:"fas fa-edit"})}),s.jsx("button",{className:"btn btn-outline-danger",onClick:()=>handleDelete(e.id_categoria),children:s.jsx("i",{className:"fas fa-trash"})})]})})]},e.id_categoria))})]})})})}),t&&s.jsx("div",{className:"modal fade show d-block",tabIndex:-1,children:s.jsx("div",{className:"modal-dialog",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[s.jsx("h5",{className:"modal-title",children:c?"Editar Categor\xeda":"Nueva Categor\xeda"}),s.jsx("button",{type:"button",className:"btn-close",onClick:handleFormClose})]}),(0,s.jsxs)("form",{onSubmit:handleSubmit,children:[s.jsx("div",{className:"modal-body",children:(0,s.jsxs)("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"categoria",className:"form-label",children:"Nombre de la Categor\xeda"}),s.jsx("input",{type:"text",className:"form-control",id:"categoria",value:x.categoria,onChange:e=>m({categoria:e.target.value}),required:!0})]})}),(0,s.jsxs)("div",{className:"modal-footer",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:handleFormClose,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?(0,s.jsxs)(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Guardando..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("i",{className:"fas fa-save me-2"}),c?"Actualizar":"Crear"]})})]})]})]})})})]}),s.jsx(l.Z,{})]})]})}},3335:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var s=t(5153);let r=(0,s.createProxy)(String.raw`C:\Users\User\Documents\PROYECTOS\BASE DE DATOS - Facultad\ProbandoReact\ControlaMas\app\categorias\page.tsx`),{__esModule:i,$$typeof:n}=r,l=r.default,o=l}};var a=require("../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[862,879,718,655],()=>__webpack_exec__(2081));module.exports=t})();