(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{1604:function(e,a,s){Promise.resolve().then(s.bind(s,4092))},4092:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return CategoriasPage}});var t=s(7437),r=s(2265),l=s(5220),i=s(6264),n=s(5313);function CategoriasPage(){let[e,a]=(0,r.useState)([]),[s,c]=(0,r.useState)(!1),[d,o]=(0,r.useState)(null),[m,h]=(0,r.useState)({categoria:""}),[x,g]=(0,r.useState)(!0),[u,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{cargarCategorias()},[]);let cargarCategorias=async()=>{try{let e=await fetch("/api/categorias"),s=await e.json();a(s)}catch(e){console.error("Error cargando categor\xedas:",e)}finally{g(!1)}},handleEdit=e=>{o(e),h({categoria:e.categoria}),c(!0)},handleDelete=async e=>{if(confirm("\xbfEst\xe1s seguro de eliminar esta categor\xeda?"))try{let a=await fetch("/api/categorias/".concat(e),{method:"DELETE"});if(a.ok)cargarCategorias(),alert("Categor\xeda eliminada correctamente");else{let e=await a.json();alert(e.error)}}catch(e){alert("Error al eliminar categor\xeda")}},handleSubmit=async e=>{if(e.preventDefault(),!m.categoria.trim()){alert("El nombre de la categor\xeda es requerido");return}j(!0);try{let e=d?"/api/categorias/".concat(d.id_categoria):"/api/categorias",a=d?"PUT":"POST",s=await fetch(e,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(s.ok)c(!1),o(null),h({categoria:""}),cargarCategorias(),alert(d?"Categor\xeda actualizada":"Categor\xeda creada");else{let e=await s.json();alert(e.error)}}catch(e){alert("Error al guardar categor\xeda")}finally{j(!1)}},handleFormClose=()=>{c(!1),o(null),h({categoria:""})};return(0,t.jsxs)("div",{className:"d-flex",children:[(0,t.jsx)(i.Z,{}),(0,t.jsxs)("div",{className:"flex-grow-1",children:[(0,t.jsx)(l.Z,{}),(0,t.jsxs)("main",{className:"container-fluid py-4",children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"h3 mb-0",children:"Gesti\xf3n de Categor\xedas"}),(0,t.jsx)("p",{className:"text-muted",children:"Administra las categor\xedas de gastos"})]}),(0,t.jsxs)("button",{className:"btn btn-primary",onClick:()=>c(!0),children:[(0,t.jsx)("i",{className:"fas fa-plus me-2"}),"Nueva Categor\xeda"]})]}),(0,t.jsx)("div",{className:"card",children:(0,t.jsx)("div",{className:"card-body",children:x?(0,t.jsx)("div",{className:"text-center py-4",children:(0,t.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Cargando..."})})}):(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-hover",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"ID"}),(0,t.jsx)("th",{children:"Nombre"}),(0,t.jsx)("th",{children:"Acciones"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.id_categoria}),(0,t.jsx)("td",{children:e.categoria}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"btn-group btn-group-sm",children:[(0,t.jsx)("button",{className:"btn btn-outline-primary",onClick:()=>handleEdit(e),children:(0,t.jsx)("i",{className:"fas fa-edit"})}),(0,t.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>handleDelete(e.id_categoria),children:(0,t.jsx)("i",{className:"fas fa-trash"})})]})})]},e.id_categoria))})]})})})}),s&&(0,t.jsx)("div",{className:"modal fade show d-block",tabIndex:-1,children:(0,t.jsx)("div",{className:"modal-dialog",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsx)("h5",{className:"modal-title",children:d?"Editar Categor\xeda":"Nueva Categor\xeda"}),(0,t.jsx)("button",{type:"button",className:"btn-close",onClick:handleFormClose})]}),(0,t.jsxs)("form",{onSubmit:handleSubmit,children:[(0,t.jsx)("div",{className:"modal-body",children:(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"categoria",className:"form-label",children:"Nombre de la Categor\xeda"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"categoria",value:m.categoria,onChange:e=>h({categoria:e.target.value}),required:!0})]})}),(0,t.jsxs)("div",{className:"modal-footer",children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:handleFormClose,children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Guardando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:"fas fa-save me-2"}),d?"Actualizar":"Crear"]})})]})]})]})})})]}),(0,t.jsx)(n.Z,{})]})]})}}},function(e){e.O(0,[412,517,971,472,744],function(){return e(e.s=1604)}),_N_E=e.O()}]);